<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kfoodbox.bookmark.repository.BookmarkRepository">
    <select id="findBookmarkCommunityArticlesByUserId" parameterType="long" resultType="kfoodbox.bookmark.dto.response.MyCommunityArticleBookmarksResponse$Bookmark">
        SELECT
            `t1`.`community_article_id` `id`,
            `t2`.`title` `title`
        FROM (
            SELECT *
            FROM `kfoodbox`.`community_article_bookmark`
            WHERE `user_id` = #{id}
        ) `t1`
            INNER JOIN `kfoodbox`.`community_article` `t2`
            ON `t1`.`community_article_id` = `t2`.`id`
    </select>

    <select id="findBookmarkCustomRecipeArticlesByUserId" parameterType="long" resultType="kfoodbox.bookmark.dto.response.MyCustomRecipeArticleBookmarksResponse$Bookmark">
        SELECT
            `t1`.`custom_recipe_article_id` `id`,
            `t2`.`title` `title`
        FROM (
            SELECT *
            FROM `kfoodbox`.`custom_recipe_article_bookmark`
            WHERE `user_id` = #{id}
        ) `t1`
            INNER JOIN `kfoodbox`.`custom_recipe_article` `t2`
            ON `t1`.`custom_recipe_article_id` = `t2`.`id`
    </select>

    <select id="findBookmarkFoodsByUserId" parameterType="long" resultType="kfoodbox.bookmark.dto.response.MyFoodBookmarksResponse$Bookmark">
        SELECT
            `t1`.`food_id` `id`,
            `t2`.`name` `name`
        FROM (
            SELECT *
            FROM `kfoodbox`.`food_bookmark`
            WHERE `user_id` = #{id}
        ) `t1`
            INNER JOIN `kfoodbox`.`food` `t2`
            ON `t1`.`food_id` = `t2`.`id`
    </select>
</mapper>
